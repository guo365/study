<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
  
<!-- Mirrored from docs.openstack.org/ops-guide/ops-customize-compute.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Jan 2017 09:37:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

    <title>OpenStack Docs: Customizing the OpenStack Compute (nova) Scheduler</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap CSS -->
<link href="_static/css/bootstrap.min.css" rel="stylesheet">

<!-- Pygments CSS -->
<link href="_static/css/native.css" rel="stylesheet">

<!-- Fonts -->
<link href="../../maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

<!-- Custom CSS -->
<link href="_static/css/combined.css" rel="stylesheet">
<link href="_static/css/styles.css" rel="stylesheet">

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->
  


<!-- Google Analytics -->
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','../../www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-17511903-1', 'auto');
ga('send', 'pageview');
</script>
<!-- End Google Analytics -->

  </head>
  <body>
<nav class="navbar navbar-default inner" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <div class="brand-wrapper">
        <a class="navbar-brand" href="http://docs.openstack.org/"></a>
      </div>
      <div class="search-icon show"><i class="fa fa-search"></i> Search</div></div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <div class="search-container tiny">
        <div id="gcse">
          <script type="text/javascript">
(function() {
  var cx = '000108871792296872333:noj9nikm74i';
  var gcse = document.createElement('script');
  gcse.type = 'text/javascript';
  gcse.async = true;
  gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
      '//www.google.com/cse/cse.js?cx=' + cx;
  var s = document.getElementsByTagName('script')[0];
  s.parentNode.insertBefore(gcse, s);
})();
          </script>
          <gcse:search gname="standard"></gcse:search>
        </div>
        <i class="fa fa-times close-search"></i>
      </div>
      <ul class="nav navbar-nav navbar-main show">
        <li>
          <div id="gcse-mobile">
            <gcse:search gname="mobile"></gcse:search>
          </div>
        </li>
        <li>
          <a href="http://www.openstack.org/software/" class="drop" id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuSoftware">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/project-navigator/">Project Navigator</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sample-configs/">Sample Configs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get Started</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/roadmap/">Roadmap</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/latest-release/">Latest Release</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/software/sourcecode/">Source Code</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/user-stories/" class="drop" id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuUsers">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/enterprise/">OpenStack in the Enterprise</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/appdev/">Application Developers</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/surveys/landing">User Survey</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/community/" class="drop" id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuCommunity">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/">OpenStack Foundation</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://wiki.openstack.org/">OpenStack Wiki</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://groups.openstack.org/">User Groups</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/speakers/">Speakers Bureau</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/foundation/companies/">Supporting Companies</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/jobs/">Jobs</a></li>
            <li role="presentation" class="divider"></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/join/">Join The Community</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/marketplace/">Marketplace</a>
        </li>
        <li>
          <a href="http://www.openstack.org/events/" class="drop" id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/">Overview</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="https://www.openstack.org/summit/">The OpenStack Summit</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/">More OpenStack Events</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/community/events/#openstack_days">OpenStack Days</a></li>
          </ul>
        </li>
        <li>
          <a href="http://www.openstack.org/learn/" class="drop" id="dropdownMenuLearn">Learn <i class="fa fa-caret-down"></i></a>
          <ul class="dropdown-menu dropdown-hover" role="menu" aria-labelledby="dropdownMenuEvents">
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/marketplace/training/">Training</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://superuser.openstack.org/">Superuser Magazine</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://ask.openstack.org/">Ask a Technical Question</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/news/">News</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/blog/">Blog</a></li>
            <li role="presentation"><a role="menuitem" tabindex="-1" href="http://www.openstack.org/videos/summits">Summit Videos</a></li>
          </ul>
        </li>
        <li>
          <a href="http://docs.openstack.org/">Docs</a>
        </li>
      </ul>
    </div>
  </div>
</nav>
    <div class="container docs-book-wrapper">
      <div class="row">
        <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<div class="row">
  <div class="col-lg-8">
    <h2>Customizing the OpenStack Compute (nova) Scheduler</h2>
  </div>
  <div class="docs-actions">
    
    <a href="ops-customize-objectstorage.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Customizing Object Storage (Swift) Middleware"></i></a>
    
    
    <a href="ops-customize-dashboard.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Customizing the Dashboard (Horizon)"></i></a>
    
    <a id="logABugLink1" href="#" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
  </div>
</div>
          <div class="row docs-byline">
            <div class="docs-updated">updated: 2016-12-30 18:30</div>
          </div>
          <div class="row">
            <div class="col-lg-12">
              <div class="docs-top-contents">

<h5><a href="index-2.html">Contents</a></h5>
<ul>
<li><a class="reference internal" href="#">Customizing the OpenStack Compute (nova) Scheduler</a></li>
</ul>

              </div>
              <div class="docs-body">

  <div class="section" id="customizing-the-openstack-compute-nova-scheduler">
<h1>Customizing the OpenStack Compute (nova) Scheduler<a class="headerlink" href="#customizing-the-openstack-compute-nova-scheduler" title="Permalink to this headline">¶</a></h1>
<p>Many OpenStack projects allow for customization of specific features
using a driver architecture. You can write a driver that conforms to a
particular interface and plug it in through configuration. For example,
you can easily plug in a new scheduler for Compute. The existing
schedulers for Compute are feature full and well documented at <a class="reference external" href="http://docs.openstack.org/newton/config-reference/compute/scheduler.html">Scheduling</a>.
However, depending on your user&#8217;s use cases, the existing schedulers
might not meet your requirements. You might need to create a new scheduler.</p>
<p>To create a scheduler, you must inherit from the class
<code class="docutils literal"><span class="pre">nova.scheduler.driver.Scheduler</span></code>. Of the five methods that you can
override, you <em>must</em> override the two methods marked with an asterisk
(*) below:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">update_service_capabilities</span></code></li>
<li><code class="docutils literal"><span class="pre">hosts_up</span></code></li>
<li><code class="docutils literal"><span class="pre">group_hosts</span></code></li>
<li>* <code class="docutils literal"><span class="pre">schedule_run_instance</span></code></li>
<li>* <code class="docutils literal"><span class="pre">select_destinations</span></code></li>
</ul>
<p>To demonstrate customizing OpenStack, we&#8217;ll create an example of a
Compute scheduler that randomly places an instance on a subset of hosts,
depending on the originating IP address of the request and the prefix of
the hostname. Such an example could be useful when you have a group of
users on a subnet and you want all of their instances to start within
some subset of your hosts.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This example is for illustrative purposes only. It should not be
used as a scheduler for Compute without further development and
testing.</p>
</div>
<p>When you join the screen session that <code class="docutils literal"><span class="pre">stack.sh</span></code> starts with
<code class="docutils literal"><span class="pre">screen</span> <span class="pre">-r</span> <span class="pre">stack</span></code>, you are greeted with many screen windows:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">0$ shell*  1$ key  2$ horizon  ...  9$ n-api  ...  14$ n-sch ...</span>
</pre></div>
</div>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">shell</span></code></dt>
<dd>A shell where you can get some work done</dd>
<dt><code class="docutils literal"><span class="pre">key</span></code></dt>
<dd>The keystone service</dd>
<dt><code class="docutils literal"><span class="pre">horizon</span></code></dt>
<dd>The horizon dashboard web application</dd>
<dt><code class="docutils literal"><span class="pre">n-{name}</span></code></dt>
<dd>The nova services</dd>
<dt><code class="docutils literal"><span class="pre">n-sch</span></code></dt>
<dd>The nova scheduler service</dd>
</dl>
<p><strong>To create the scheduler and plug it in through configuration</strong></p>
<ol class="arabic">
<li><p class="first">The code for OpenStack lives in <code class="docutils literal"><span class="pre">/opt/stack</span></code>, so go to the <code class="docutils literal"><span class="pre">nova</span></code>
directory and edit your scheduler module. Change to the directory where
<code class="docutils literal"><span class="pre">nova</span></code> is installed:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> /opt/stack/nova
</pre></div>
</div>
</li>
<li><p class="first">Create the <code class="docutils literal"><span class="pre">ip_scheduler.py</span></code> Python source code file:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> vim nova/scheduler/ip_scheduler.py
</pre></div>
</div>
</li>
<li><p class="first">The code shown below is a driver that will
schedule servers to hosts based on IP address as explained at the
beginning of the section. Copy the code into <code class="docutils literal"><span class="pre">ip_scheduler.py</span></code>. When
you are done, save and close the file.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># vim: tabstop=4 shiftwidth=4 softtabstop=4</span>
<span class="c1"># Copyright (c) 2014 OpenStack Foundation</span>
<span class="c1"># All Rights Reserved.</span>
<span class="c1">#</span>
<span class="c1">#    Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may</span>
<span class="c1">#    not use this file except in compliance with the License. You may obtain</span>
<span class="c1">#    a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#         http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1">#    Unless required by applicable law or agreed to in writing, software</span>
<span class="c1">#    distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT</span>
<span class="c1">#    WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the</span>
<span class="c1">#    License for the specific language governing permissions and limitations</span>
<span class="c1">#    under the License.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">IP Scheduler implementation</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">random</span>

<span class="kn">from</span> <span class="nn">oslo_config</span> <span class="kn">import</span> <span class="n">cfg</span>

<span class="kn">from</span> <span class="nn">nova.compute</span> <span class="kn">import</span> <span class="n">rpcapi</span> <span class="k">as</span> <span class="n">compute_rpcapi</span>
<span class="kn">from</span> <span class="nn">nova</span> <span class="kn">import</span> <span class="n">exception</span>
<span class="kn">from</span> <span class="nn">nova.openstack.common</span> <span class="kn">import</span> <span class="n">log</span> <span class="k">as</span> <span class="n">logging</span>
<span class="kn">from</span> <span class="nn">nova.openstack.common.gettextutils</span> <span class="kn">import</span> <span class="n">_</span>
<span class="kn">from</span> <span class="nn">nova.scheduler</span> <span class="kn">import</span> <span class="n">driver</span>

<span class="n">CONF</span> <span class="o">=</span> <span class="n">cfg</span><span class="o">.</span><span class="n">CONF</span>
<span class="n">CONF</span><span class="o">.</span><span class="n">import_opt</span><span class="p">(</span><span class="s1">&#39;compute_topic&#39;</span><span class="p">,</span> <span class="s1">&#39;nova.compute.rpcapi&#39;</span><span class="p">)</span>
<span class="n">LOG</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">IPScheduler</span><span class="p">(</span><span class="n">driver</span><span class="o">.</span><span class="n">Scheduler</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Implements Scheduler as a random node selector based on</span>
<span class="sd">    IP address and hostname prefix.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">IPScheduler</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">compute_rpcapi</span> <span class="o">=</span> <span class="n">compute_rpcapi</span><span class="o">.</span><span class="n">ComputeAPI</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_filter_hosts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request_spec</span><span class="p">,</span> <span class="n">hosts</span><span class="p">,</span> <span class="n">filter_properties</span><span class="p">,</span>
        <span class="n">hostname_prefix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Filter a list of hosts based on hostname prefix.&quot;&quot;&quot;</span>

        <span class="n">hosts</span> <span class="o">=</span> <span class="p">[</span><span class="n">host</span> <span class="k">for</span> <span class="n">host</span> <span class="ow">in</span> <span class="n">hosts</span> <span class="k">if</span> <span class="n">host</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">hostname_prefix</span><span class="p">)]</span>
        <span class="k">return</span> <span class="n">hosts</span>

    <span class="k">def</span> <span class="nf">_schedule</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">topic</span><span class="p">,</span> <span class="n">request_spec</span><span class="p">,</span> <span class="n">filter_properties</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Picks a host that is up at random.&quot;&quot;&quot;</span>

        <span class="n">elevated</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">elevated</span><span class="p">()</span>
        <span class="n">hosts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hosts_up</span><span class="p">(</span><span class="n">elevated</span><span class="p">,</span> <span class="n">topic</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">hosts</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Is the appropriate service running?&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">NoValidHost</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">remote_ip</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">remote_address</span>

        <span class="k">if</span> <span class="n">remote_ip</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;10.1&#39;</span><span class="p">):</span>
            <span class="n">hostname_prefix</span> <span class="o">=</span> <span class="s1">&#39;doc&#39;</span>
        <span class="k">elif</span> <span class="n">remote_ip</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;10.2&#39;</span><span class="p">):</span>
            <span class="n">hostname_prefix</span> <span class="o">=</span> <span class="s1">&#39;ops&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">hostname_prefix</span> <span class="o">=</span> <span class="s1">&#39;dev&#39;</span>

        <span class="n">hosts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_filter_hosts</span><span class="p">(</span><span class="n">request_spec</span><span class="p">,</span> <span class="n">hosts</span><span class="p">,</span> <span class="n">filter_properties</span><span class="p">,</span>
            <span class="n">hostname_prefix</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">hosts</span><span class="p">:</span>
            <span class="n">msg</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s2">&quot;Could not find another compute&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">NoValidHost</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span>

        <span class="n">host</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">hosts</span><span class="p">)</span>
        <span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;Request from </span><span class="si">%(remote_ip)s</span><span class="s2"> scheduled to </span><span class="si">%(host)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">locals</span><span class="p">())</span>

        <span class="k">return</span> <span class="n">host</span>

    <span class="k">def</span> <span class="nf">select_destinations</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">request_spec</span><span class="p">,</span> <span class="n">filter_properties</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Selects random destinations.&quot;&quot;&quot;</span>
        <span class="n">num_instances</span> <span class="o">=</span> <span class="n">request_spec</span><span class="p">[</span><span class="s1">&#39;num_instances&#39;</span><span class="p">]</span>
        <span class="c1"># NOTE(timello): Returns a list of dicts with &#39;host&#39;, &#39;nodename&#39; and</span>
        <span class="c1"># &#39;limits&#39; as keys for compatibility with filter_scheduler.</span>
        <span class="n">dests</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_instances</span><span class="p">):</span>
            <span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schedule</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">CONF</span><span class="o">.</span><span class="n">compute_topic</span><span class="p">,</span>
                    <span class="n">request_spec</span><span class="p">,</span> <span class="n">filter_properties</span><span class="p">)</span>
            <span class="n">host_state</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span> <span class="n">nodename</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
            <span class="n">dests</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">host_state</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">dests</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">num_instances</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">exception</span><span class="o">.</span><span class="n">NoValidHost</span><span class="p">(</span><span class="n">reason</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">dests</span>

    <span class="k">def</span> <span class="nf">schedule_run_instance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">,</span> <span class="n">request_spec</span><span class="p">,</span>
                              <span class="n">admin_password</span><span class="p">,</span> <span class="n">injected_files</span><span class="p">,</span>
                              <span class="n">requested_networks</span><span class="p">,</span> <span class="n">is_first_time</span><span class="p">,</span>
                              <span class="n">filter_properties</span><span class="p">,</span> <span class="n">legacy_bdm_in_spec</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Create and run an instance or instances.&quot;&quot;&quot;</span>
        <span class="n">instance_uuids</span> <span class="o">=</span> <span class="n">request_spec</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;instance_uuids&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">num</span><span class="p">,</span> <span class="n">instance_uuid</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">instance_uuids</span><span class="p">):</span>
            <span class="n">request_spec</span><span class="p">[</span><span class="s1">&#39;instance_properties&#39;</span><span class="p">][</span><span class="s1">&#39;launch_index&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">num</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">host</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_schedule</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">CONF</span><span class="o">.</span><span class="n">compute_topic</span><span class="p">,</span>
                                      <span class="n">request_spec</span><span class="p">,</span> <span class="n">filter_properties</span><span class="p">)</span>
                <span class="n">updated_instance</span> <span class="o">=</span> <span class="n">driver</span><span class="o">.</span><span class="n">instance_update_db</span><span class="p">(</span><span class="n">context</span><span class="p">,</span>
                        <span class="n">instance_uuid</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">compute_rpcapi</span><span class="o">.</span><span class="n">run_instance</span><span class="p">(</span><span class="n">context</span><span class="p">,</span>
                        <span class="n">instance</span><span class="o">=</span><span class="n">updated_instance</span><span class="p">,</span> <span class="n">host</span><span class="o">=</span><span class="n">host</span><span class="p">,</span>
                        <span class="n">requested_networks</span><span class="o">=</span><span class="n">requested_networks</span><span class="p">,</span>
                        <span class="n">injected_files</span><span class="o">=</span><span class="n">injected_files</span><span class="p">,</span>
                        <span class="n">admin_password</span><span class="o">=</span><span class="n">admin_password</span><span class="p">,</span>
                        <span class="n">is_first_time</span><span class="o">=</span><span class="n">is_first_time</span><span class="p">,</span>
                        <span class="n">request_spec</span><span class="o">=</span><span class="n">request_spec</span><span class="p">,</span>
                        <span class="n">filter_properties</span><span class="o">=</span><span class="n">filter_properties</span><span class="p">,</span>
                        <span class="n">legacy_bdm_in_spec</span><span class="o">=</span><span class="n">legacy_bdm_in_spec</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ex</span><span class="p">:</span>
                <span class="c1"># NOTE(vish): we don&#39;t reraise the exception here to make sure</span>
                <span class="c1">#             that all instances in the request get set to</span>
                <span class="c1">#             error properly</span>
                <span class="n">driver</span><span class="o">.</span><span class="n">handle_schedule_error</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">ex</span><span class="p">,</span> <span class="n">instance_uuid</span><span class="p">,</span>
                                             <span class="n">request_spec</span><span class="p">)</span>
</pre></div>
</div>
<p>There is a lot of useful information in <code class="docutils literal"><span class="pre">context</span></code>, <code class="docutils literal"><span class="pre">request_spec</span></code>,
and <code class="docutils literal"><span class="pre">filter_properties</span></code> that you can use to decide where to schedule
the instance. To find out more about what properties are available, you
can insert the following log statements into the
<code class="docutils literal"><span class="pre">schedule_run_instance</span></code> method of the scheduler above:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;context = </span><span class="si">%(context)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s1">&#39;context&#39;</span><span class="p">:</span> <span class="n">context</span><span class="o">.</span><span class="n">__dict__</span><span class="p">})</span>
<span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;request_spec = </span><span class="si">%(request_spec)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">locals</span><span class="p">())</span>
<span class="n">LOG</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s2">&quot;filter_properties = </span><span class="si">%(filter_properties)s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">locals</span><span class="p">())</span>
</pre></div>
</div>
</li>
<li><p class="first">To plug this scheduler into nova, edit one configuration file,
<code class="docutils literal"><span class="pre">/etc/nova/nova.conf</span></code>:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> vim /etc/nova/nova.conf
</pre></div>
</div>
</li>
<li><p class="first">Find the <code class="docutils literal"><span class="pre">scheduler_driver</span></code> config and change it like so:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">scheduler_driver</span><span class="o">=</span><span class="s">nova.scheduler.ip_scheduler.IPScheduler</span>
</pre></div>
</div>
</li>
<li><p class="first">Restart the nova scheduler service to make nova use your scheduler.
Start by switching to the <code class="docutils literal"><span class="pre">n-sch</span></code> screen:</p>
<ol class="arabic simple">
<li>Press <strong>Ctrl+A</strong> followed by <strong>9</strong>.</li>
<li>Press <strong>Ctrl+A</strong> followed by <strong>N</strong> until you reach the <code class="docutils literal"><span class="pre">n-sch</span></code> screen.</li>
<li>Press <strong>Ctrl+C</strong> to kill the service.</li>
<li>Press <strong>Up Arrow</strong> to bring up the last command.</li>
<li>Press <strong>Enter</strong> to run it.</li>
</ol>
</li>
<li><p class="first">Test your scheduler with the nova CLI.&nbsp;Start by switching to the
<code class="docutils literal"><span class="pre">shell</span></code> screen and finish by switching back to the <code class="docutils literal"><span class="pre">n-sch</span></code> screen to
check the log output:</p>
<ol class="arabic">
<li><p class="first">Press&nbsp; <strong>Ctrl+A</strong> followed by <strong>0</strong>.</p>
</li>
<li><p class="first">Make sure you are in the <code class="docutils literal"><span class="pre">devstack</span></code> directory:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> /root/devstack
</pre></div>
</div>
</li>
<li><p class="first">Source <code class="docutils literal"><span class="pre">openrc</span></code> to set up your environment variables for the CLI:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> . openrc
</pre></div>
</div>
</li>
<li><p class="first">Put the image ID for the only installed image into an environment
variable:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">IMAGE_ID</span><span class="o">=</span><span class="sb">`</span>openstack image list <span class="p">|</span> egrep cirros <span class="p">|</span> egrep -v <span class="s2">&quot;kernel|ramdisk&quot;</span> <span class="p">|</span> awk <span class="s1">&#39;{print $2}&#39;</span><span class="sb">`</span>
</pre></div>
</div>
</li>
<li><p class="first">Boot a test server:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> openstack server create --flavor <span class="m">1</span> --image <span class="nv">$IMAGE_ID</span> scheduler-test
</pre></div>
</div>
</li>
</ol>
</li>
<li><p class="first">Switch back to the <code class="docutils literal"><span class="pre">n-sch</span></code> screen. Among the log statements, you&#8217;ll
see the line:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="go">2014-01-23 19:57:47.262 DEBUG nova.scheduler.ip_scheduler</span>
<span class="go">[req-... demo demo] Request from xx.xx.xx.xx scheduled to devstack-havana</span>
<span class="go">_schedule /opt/stack/nova/nova/scheduler/ip_scheduler.py:76</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Functional testing like this is not a replacement for proper unit
and integration testing, but it serves to get you started.</p>
</div>
<p>A similar pattern can be followed in other projects that use the driver
architecture. Simply create a module and class that conform to the
driver interface and plug it in through configuration. Your code runs
when that feature is used and can call out to other services as
necessary. No project core code is touched. Look for a &#8220;driver&#8221; value in
the project&#8217;s <code class="docutils literal"><span class="pre">.conf</span></code> configuration files in <code class="docutils literal"><span class="pre">/etc/&lt;project&gt;</span></code> to
identify projects that use a driver architecture.</p>
<p>When your scheduler is done, we encourage you to open source it and let
the community know on the OpenStack mailing list. Perhaps others need
the same functionality. They can use your code, provide feedback, and
possibly contribute. If enough support exists for it, perhaps you can
propose that it be added to the official Compute
<a class="reference external" href="https://git.openstack.org/cgit/openstack/nova/tree/nova/scheduler">schedulers</a>.</p>
</div>


              </div>
            </div>
          </div>
          <div class="docs-actions">
          
            <a href="ops-customize-objectstorage.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Customizing Object Storage (Swift) Middleware"></i></a>
          
          
            <a href="ops-customize-dashboard.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Customizing the Dashboard (Horizon)"></i></a>
          
            <a id="logABugLink3" href="#" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
          </div>
          <div class="row docs-byline bottom">
            <div class="docs-updated">updated: 2016-12-30 18:30</div>
          </div>
          <div class="row">
            <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
<a href="https://creativecommons.org/licenses/by/3.0/">
 <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
</a>
<p>
 Except where otherwise noted, this document is licensed under
 <a href="https://creativecommons.org/licenses/by/3.0/">Creative Commons
 Attribution 3.0 License</a>. See all <a href="http://www.openstack.org/legal">
 OpenStack Legal Documents</a>.
</p>
            </div>
            <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
            <!-- ID buglinkbottom added so that pre-filled doc bugs
                 are sent to Launchpad projects related to the document -->
              <a href="#" id="logABugLink2" class="docs-footer-actions"><i class="fa fa-bug"></i> found an error? report a bug</a>
              <a href="http://ask.openstack.org/" class="docs-footer-actions"><i class="fa fa-question-circle"></i> questions?</a>
            </div>
          </div>
        </div>
<div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
  <div class="search-icon show">
    <i class="fa fa-search"></i> Search
  </div>
  <div class="btn-group docs-sidebar-releases">
    <button onclick="location.href='http://docs.openstack.org/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
<button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">OpenStack Documentation<i class="fa fa-caret-down"></i></button>
    <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
      <li role="presentation" class="dropdown-header">Guides</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#install-guides">Install Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#user-guides">User Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#configuration-guides">Configuration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#ops-and-admin-guides">Operations and Administration Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#api-guides">API Guides</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/index.html#contributor-guides">Contributor Guides</a></li>
      <li role="presentation" class="dropdown-header">Languages</li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ja/">日本語 (Japanese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/de/">Deutsch (German)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/fr/">Français (French)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/pt_BR/">Português (Portuguese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/zh_CN/">简体中文 (Simplified Chinese)</a></li>
      <li role="presentation"><a role="menuitem" tabindex="-1" href="http://docs.openstack.org/ko_KR/">한국어 (Korean)</a></li>
    </ul>
  </div>
  <div class="docs-sidebar-toc">
    <div class="docs-sidebar-section" id="table-of-contents">
      <a href="index-2.html" class="docs-sidebar-section-title"><h4>Contents</h4></a>
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="preface.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="operations.html">Operations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ops-lay-of-the-land.html">Lay of the Land</a></li>
<li class="toctree-l2"><a class="reference internal" href="ops-projects-users.html">Managing Projects and Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="ops-user-facing-operations.html">User-Facing Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="ops-maintenance.html">Maintenance, Failures, and Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="ops-network-troubleshooting.html">Network Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="ops-logging-monitoring.html">Logging and Monitoring</a></li>
<li class="toctree-l2"><a class="reference internal" href="ops-backup-recovery.html">Backup and Recovery</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="ops-customize.html">Customization</a></li>
<li class="toctree-l2"><a class="reference internal" href="ops-advanced-configuration.html">Advanced Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ops-upgrades.html">Upgrades</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="app-usecases.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-crypt.html">Tales From the Cryp^H^H^H^H Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-roadmaps.html">Working with Roadmaps</a></li>
<li class="toctree-l1"><a class="reference internal" href="app-resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app-support.html">Community support</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

    </div>
  </div>
</div>
      </div>
    </div>
<footer>
  <div class="container">
    <div class="row footer-links">
      <div class="col-lg-2 col-sm-2">
        <h3>OpenStack</h3>
        <ul>
          <li><a href="http://openstack.org/projects/">Projects</a></li>
          <li><a href="http://openstack.org/projects/openstack-security/">OpenStack Security</a></li>
          <li><a href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
          <li><a href="http://openstack.org/blog/">Blog</a></li>
          <li><a href="http://openstack.org/news/">News</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Community</h3>
        <ul>
          <li><a href="http://openstack.org/community/">User Groups</a></li>
          <li><a href="http://openstack.org/community/events/">Events</a></li>
          <li><a href="http://openstack.org/community/jobs/">Jobs</a></li>
          <li><a href="http://openstack.org/foundation/companies/">Companies</a></li>
          <li><a href="http://docs.openstack.org/infra/manual/developers.html">Contribute</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Documentation</h3>
        <ul>
          <li><a href="http://docs.openstack.org/">OpenStack Manuals</a></li>
          <li><a href="http://openstack.org/software/start/">Getting Started</a></li>
          <li><a href="http://developer.openstack.org/">API Documentation</a></li>
          <li><a href="https://wiki.openstack.org/">Wiki</a></li>
        </ul>
      </div>
      <div class="col-lg-2 col-sm-2">
        <h3>Branding & Legal</h3>
        <ul>
          <li><a href="http://openstack.org/brand/">Logos & Guidelines</a></li>
          <li><a href="http://openstack.org/brand/openstack-trademark-policy/">Trademark Policy</a></li>
          <li><a href="http://openstack.org/privacy/">Privacy Policy</a></li>
          <li><a href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributor_License_Agreement">OpenStack CLA</a></li>
        </ul>
      </div>
      <div class="col-lg-4 col-sm-4">
        <h3>Stay In Touch</h3>
        <a href="https://twitter.com/OpenStack" target="_blank" class="social-icons footer-twitter"></a>
        <a href="https://www.facebook.com/openstack" target="_blank" class="social-icons footer-facebook"></a>
        <a href="https://www.linkedin.com/company/openstack" target="_blank" class="social-icons footer-linkedin"></a>
        <a href="https://www.youtube.com/user/OpenStackFoundation" target="_blank" class="social-icons footer-youtube"></a>
        <p class="fine-print">
          The OpenStack project is provided under the
          <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache 2.0 license</a>. Openstack.org is powered by
          <a href="http://rackspace.com/" target="_blank">Rackspace Cloud Computing</a>.
        </p>
      </div>
    </div>
  </div>
</footer>
<!-- jQuery -->
<script type="text/javascript" src="_static/js/jquery-1.11.3.js"></script>

<!-- Bootstrap JavaScript -->
<script type="text/javascript" src="_static/js/bootstrap.min.js"></script>

<!-- The rest of the JS -->
<script type="text/javascript" src="_static/js/navigation.js"></script>

<!-- Docs JS -->
<script type="text/javascript" src="_static/js/docs.js"></script>

<!-- Popovers -->
<script type="text/javascript" src="_static/js/webui-popover.js"></script>

<!-- Javascript for page -->
<script language="JavaScript">
/* build a description of this page including SHA, source location on git repo,
   build time and the project's launchpad bug tag. Set the HREF of the bug
   buttons */

    var lineFeed = "%0A";
    var gitURL = "Source: Can't derive source file URL";

    /* there have been cases where "pagename" wasn't set; better check for it */
        /* The URL of the source file on Git is based on the giturl variable
           in conf.py, which must be manually initialized to the source file
           URL in Git.
           "pagename" is a standard sphinx parameter containing the name of
           the source file, without extension.                             */

        var sourceFile = "ops-customize-compute" + ".rst";
        gitURL = "Source: http://git.openstack.org/cgit/openstack/openstack-manuals/tree/doc/ops-guide/source" + "/" + sourceFile;

    /* gitsha, project and bug_tag rely on variables in conf.py */
    var gitSha = "SHA: 522e4919f8db2885f022e41fa599c8c3056b8485";
        var bugProject = "openstack-manuals";
        var bugTitle = "Customizing the OpenStack Compute (nova) Scheduler in Operations Guide";
    var fieldTags = "ops-guide";

    /* "last_updated" is the build date and time. It relies on the
       conf.py variable "html_last_updated_fmt", which should include
       year/month/day as well as hours and minutes                   */
    var buildstring = "Release: 0.0.1 on 2016-12-30 18:30";

    var fieldComment = encodeURI(buildstring) +
                       lineFeed + encodeURI(gitSha) +
                       lineFeed + encodeURI(gitURL) ;

    logABug(bugTitle, bugProject, fieldComment, fieldTags);
</script>

<!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
(function() {
var cx = '000108871792296872333:noj9nikm74i';
var gcse = document.createElement('script');
gcse.type = 'text/javascript';
gcse.async = true;
gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
'//www.google.com/cse/cse.js?cx=' + cx;
var s = document.getElementsByTagName('script')[0];
s.parentNode.insertBefore(gcse, s);
})();
</script>

  </body>

<!-- Mirrored from docs.openstack.org/ops-guide/ops-customize-compute.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Jan 2017 09:37:51 GMT -->
</html>